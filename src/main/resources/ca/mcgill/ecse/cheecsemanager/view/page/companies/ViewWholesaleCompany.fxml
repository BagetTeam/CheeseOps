<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.shape.SVGPath?>
<?import ca.mcgill.ecse.cheecsemanager.fxml.components.*?>

<AnchorPane
    prefHeight="600.0"
    prefWidth="900.0"
    styleClass="page"
    xmlns="http://javafx.com/javafx/21"
    xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="ca.mcgill.ecse.cheecsemanager.fxml.controllers.wholesaleCompany.ViewWholesaleCompanyController">
    <children>
        <VBox AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
            <children>
                <!-- Header -->
                <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-padding: 16; -fx-background-color: transparent;">
                    <children>
                        <StyledButton fx:id="backBtn" variant="DEFAULT" size="SM" text="" onAction="#handleBack">
                            <graphic>
                                <SVGPath content="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" styleClass="icon"/>
                            </graphic>
                        </StyledButton>
                        <Label text="Company details" style="-fx-text-fill: -color-fg; -fx-font-size: 18px; -fx-font-weight: bold;" HBox.hgrow="ALWAYS"/>
                        <StyledButton fx:id="editBtn" variant="DEFAULT" size="SM" text="Edit" onAction="#handleEdit"/>
                        <StyledButton fx:id="deleteBtn" variant="DESTRUCTIVE" size="SM" text="Delete" onAction="#handleDelete"/>
                    </children>
                </HBox>

                <!-- Main content -->
                <HBox spacing="24" VBox.vgrow="ALWAYS">
                    <padding>
                        <Insets top="16" right="24" bottom="24" left="24"/>
                    </padding>
                    <children>
                        <!-- Left Panel - Company Details Card -->
                        <VBox fx:id="companyDescriptionCard" alignment="TOP_CENTER" spacing="10" styleClass="company-description-card" prefWidth="300">
                            <padding>
                                <Insets top="32" right="32" bottom="32" left="32"/>
                            </padding>
                            <children>
                                <!-- Profile Image Circle -->
                                <StackPane>
                                    <children>
                                        <Circle centerX="60.0" centerY="60.0" radius="60.0" style="-fx-fill: -color-darker-bg; -fx-stroke: -color-muted; -fx-stroke-width: 2;"/>
                                        <Icon icon="Factory"/>
                                    </children>
                                </StackPane>

                                <VBox alignment="TOP_LEFT" maxWidth="Infinity" spacing="4">
                                    <!-- Name -->
                                    <Label fx:id="nameLabel" text="Company Name" styleClass="text-fg, text-bold, text-lg"/>
                                </VBox>

                                <VBox alignment="TOP_LEFT" maxWidth="Infinity">
                                    <!-- Address with icon -->
                                    <HBox alignment="CENTER_LEFT" spacing="6">
                                        <children>
                                            <Icon icon="Marker"/>
                                            <Label fx:id="addressLabel" text="Company Address" styleClass="text-fg"/>
                                        </children>
                                    </HBox>
                                </VBox>

                                <VBox alignment="TOP_LEFT" maxWidth="Infinity">
                                    <!-- Total Orders with icon -->
                                    <HBox alignment="CENTER_LEFT" spacing="6">
                                        <children>
                                            <Icon icon="Cargo"/>
                                            <Label fx:id="ordersCountLabel" text="0 orders" styleClass="text-fg"/>
                                        </children>
                                    </HBox>
                                </VBox>
                            </children>
                        </VBox>

                        <!-- Right Panel - Orders Table -->
                        <VBox spacing="16" HBox.hgrow="ALWAYS">
                            <children>
                                <!-- Header -->
                                <HBox alignment="CENTER_LEFT" spacing="16">
                                    <children>
                                        <Label text="Orders" style="-fx-text-fill: -color-fg; -fx-font-size: 20px; -fx-font-weight: bold;" HBox.hgrow="ALWAYS"/>
                                    </children>
                                </HBox>

                                <!-- Table (empty for now) -->
                                <TableView fx:id="ordersTable" VBox.vgrow="ALWAYS" styleClass="company-table">
                                    <columns>
                                        <TableColumn fx:id="orderIdColumn" text="Order ID" prefWidth="100"/>
                                        <TableColumn fx:id="orderDateColumn" text="Order Date" prefWidth="150"/>
                                        <TableColumn fx:id="orderStatusColumn" text="Status" prefWidth="100"/>
                                        <TableColumn fx:id="orderTotalColumn" text="Total" prefWidth="100"/>
                                    </columns>
                                    <columnResizePolicy>
                                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                                    </columnResizePolicy>
                                </TableView>
                            </children>
                        </VBox>
                    </children>
                </HBox>
            </children>
        </VBox>

        <!-- Dialog Container -->
        <StackPane
            fx:id="dialogContainer"
            AnchorPane.topAnchor="0"
            AnchorPane.bottomAnchor="0"
            AnchorPane.leftAnchor="0"
            AnchorPane.rightAnchor="0"
            mouseTransparent="true"/>

        <!-- Toast Container -->
        <StackPane
            AnchorPane.topAnchor="20"
            AnchorPane.leftAnchor="0"
            AnchorPane.rightAnchor="0"
            mouseTransparent="true">
            <HBox
                fx:id="toastContainer"
                visible="false"
                managed="false"
                spacing="10"
                alignment="CENTER_LEFT"
                style="-fx-background-color: derive(-color-success, -60%); -fx-background-radius: 8; -fx-padding: 12 16; -fx-border-color: -color-success; -fx-border-width: 1.5; -fx-border-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.3), 10, 0, 0, 4);"
                maxWidth="400"
                mouseTransparent="false">
                <Icon icon="Cheese" style="-fx-stroke: -color-success;"/>
                <Label
                    fx:id="toastLabel"
                    text=""
                    wrapText="true"
                    style="-fx-text-fill: -color-success; -fx-font-size: 14px; -fx-font-weight: 600;"
                    HBox.hgrow="ALWAYS"/>
            </HBox>
        </StackPane>
    </children>
</AnchorPane>